<div class="l-container__sidebar">
  <div class="l-container__content">
    {{sidebar-nav reorderItems=@reorderItems}}
  </div>
  <div class="l-container__footer">
    <div class="c-sidebar-actions">
      <div
        class="c-sidebar-actions__item"
        title="Create a new list"
        {{action @createProject}}
      >
        {{svg-jar "plus" class="c-sidebar-actions__icon c-sidebar-actions__icon--plus"}}

        <div class="c-sidebar-actions__text">
          New Project
        </div>
      </div>
    </div>
  </div>
</div>

<div
  class="l-container__main {{if this.isEditing 'is-editing'}}"
  data-test-main-section
>
  {{yield}}

  {{#animated-if this.hasSelected use=transition duration=200}}
    {{actions-bar
      isDeleted=this.isInTrashList
      openMoveDialog=(if this.hasSelectedProjects null (toggle-action "isMoveDialogOpen" this))
      openWhenDialog=(toggle-action "isWhenDialogOpen" this)
      openDeadlineDialog=(toggle-action "isDeadlineDialogOpen" this)
      openTagsDialog=(toggle-action "isTagsDialogOpen" this)
      markAsCompleted=(action "markSelectedItemsAs" "completed")
      markAsNew=(action "markSelectedItemsAs" "new")
      markAsCanceled=(action "markSelectedItemsAs" "canceled")
      delete=(action "deleteSelectedItems")
      undelete=(action "undeleteSelectedItems")
    }}

    {{#from-elsewhere name="actions-bar" as |actionsBar|}}
      {{component actionsBar}}
    {{/from-elsewhere}}
  {{/animated-if}}
</div>

{{#if this.isShortcutsDialogOpen}}
  {{to-elsewhere named="modal" send=(
    component "shortcuts-dialog"
    close=(toggle-action "isShortcutsDialogOpen" this)
  )}}
{{/if}}

{{#if this.isMoveDialogOpen}}
  {{to-elsewhere named="modal" send=(
    component "move-dialog"
    moveToInbox=(action "moveSelectedTasksToInbox")
    moveToProject=(action "moveSelectedTasksToProject")
    close=(toggle-action "isMoveDialogOpen" this)
  )}}
{{/if}}

{{#if this.isWhenDialogOpen}}
  {{to-elsewhere named="modal" send=(
    component "when-dialog"
    setWhen=(action "setSelectedItemsWhen")
    close=(toggle-action "isWhenDialogOpen" this)
  )}}
{{/if}}

{{#if this.isDeadlineDialogOpen}}
  {{to-elsewhere named="modal" send=(
    component "deadline-dialog"
    setDeadline=(action "setSelectedItemsDeadline")
    close=(toggle-action "isDeadlineDialogOpen" this)
  )}}
{{/if}}

{{#if this.isTagsDialogOpen}}
  {{to-elsewhere named="modal" send=(
    component "tags-dialog"
    setTags=(action "setSelectedItemsTags")
    createTag=(route-action "createTag")
    setTagName=(route-action "setTagName")
    deleteTag=(route-action "deleteTag")
    close=(toggle-action "isTagsDialogOpen" this)
  )}}
{{/if}}

{{#animated-if canCreateTask use=transition duration=200}}
  <div class="c-floating-button">
    <div class="c-floating-button__inner" {{action "createNewTask"}}>
      {{svg-jar "plus" class="c-floating-button__iner__icon"}}

      {{#attach-tooltip hideOn="mouseleave click" showDelay="700"}}
        Create New To-Do
      {{/attach-tooltip}}
    </div>
  </div>
{{/animated-if}}